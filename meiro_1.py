from tkinter import*;import random

win = Tk()
cv = Canvas(win, width = 470,height = 470)
cv.pack()


#行と列用のリスト
sa=[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,70,70,70,70,70,70,70,70,70,70,70,70,70,70,70,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,280,280,280,280,280,280,280,280,280,280,280,280,280,280,280,310,310,310,310,310,310,310,310,310,310,310,310,310,310,310,340,340,340,340,340,340,340,340,340,340,340,340,340,340,340,370,370,370,370,370,370,370,370,370,370,370,370,370,370,370,400,400,400,400,400,400,400,400,400,400,400,400,400,400,400,430,430,430,430,430,430,430,430,430,430,430,430,430,430,430]
sb=[10,40,70,100,130,160,190,220,250,280,310,340,370,400,430]*15
#壁用のリスト
kabe=[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1]

#柱のリスト
p=[32,34,36,38,40,42,62,64,66,68,70,72,92,94,96,98,100,102,122,124,126,128,130,132,152,154,156,158,160,162,182,184,186,188,190,192]

#色用のリスト
iro=["#ffffff","#444444"]
#半端壁のリスト
kb=[33,35,37,39,41,47,49,51,53,55,57,63,65,67,69,71,77,79,81,83,85,87,93,95,97,99,101,107,109,111,113,115,117,123,125,127,129,131,137,139,141,143,145,147,153,155,157,159,161,167,169,171,173,175,177,183,185,187,189,191]

#後壁のリスト
bkb=[19,21,23,25,61,91,121,151,73,103,133,163,199,201,203,205]

#絶対道(内道)のリスト
rd=[48,50,52,54,56,78,80,82,84,86,108,110,112,114,116,138,140,142,144,146,168,170,172,174,176]

#壁を選ぶ用リスト
bk=[-1,1,-15,15]

#盤面の作成
def base():
   
    #盤面
    b=0
    for a in kabe:
        paint(b,iro[a])
        b+=1

    #半端壁生成
    for a in range(0,10):
        ll=[]
        k=[6,5,5,4,4,4,4,3,3,3,3,3,2,2,1,1,0]
        j=random.choice(k)
        
        ll=list(range(6))
        for b in range(j):
            c=random.choice(ll)
            d=kb[6*a+c]
            replace(d,1)
            ll.remove(c)

def check():
    c=0
    for a in p:
        for b in range(4):
            c+=kabe[a+bk[b]]
        if ((a/10)%2 == 0) and (c>=3):
            b=bk[random.randint(0,3)]
            replace(a+b,0)

    #箱チェック
    cc(rd,4,1)

    #柱チェック
    cc(p,3,1)

def cc(p,q,r):
    for a in p:
        c=0
        for b in range(4):
            c+=kabe[a+bk[b]]
        if c>=q:
            d=bk[random.randint(0,3)]
            replace(a+d,0)
        elif c==0:
            d=bk[random.randint(0,3)]
            replace(a+d,r)
    
    
def replace(a,b):
    del kabe[a]
    kabe.insert(a,b)
    paint(a,iro[kabe[a]])
            

#指定したマス目を指定した色で塗りつぶす
def paint(a,b):
    cv.create_rectangle(
    sb[a],sa[a],sb[a]+30,sa[a]+30,
    fill=b)


base()


for _ in range(10):
    check()

#後壁
num=[0,1,2,3]
for a in range(4):
    b=random.choice(num)
    replace(bkb[4*a+b],1)
    num.remove(b)

check()
check()   #1度目のcheck()で整理できなかった欠陥と新たに発生した欠陥をチェック
